var e=require("graphql"),t=require("wonka");const r=t=>"string"==typeof t?new e.GraphQLError(t):"object"==typeof t&&t.message?new e.GraphQLError(t.message,t.nodes,t.source,t.positions,t.path,t,t.extensions||{}):t;class n extends Error{constructor(e){const t=(e.graphQLErrors||[]).map(r),n=((e,t)=>{let r="";if(e)return`[Network] ${e.message}`;if(t)for(const e of t)r&&(r+="\n"),r+=`[GraphQL] ${e.message}`;return r})(e.networkError,t);super(n),this.name="CombinedError",this.message=n,this.graphQLErrors=t,this.networkError=e.networkError,this.response=e.response}toString(){return this.message}}const o=(e,t)=>{for(let r=0,n=0|t.length;r<n;r++)e=(e<<5)+e+t.charCodeAt(r);return 0|e},s=e=>o(5381,e)>>>0,a=new Set,i=new WeakMap,c=e=>{if(null===e||a.has(e))return"null";if("object"!=typeof e)return JSON.stringify(e)||"";if(e.toJSON)return c(e.toJSON());if(Array.isArray(e)){let t="[";for(let r of e)"["!==t&&(t+=","),r=c(r),t+=r.length>0?r:"null";return t+="]",t}const t=Object.keys(e).sort();if(!t.length&&e.constructor&&e.constructor!==Object){const t=i.get(e)||Math.random().toString(36).slice(2);return i.set(e,t),`{"__key":"${t}"}`}a.add(e);let r="{";for(const n of t){const t=c(e[n]);t&&(r.length>1&&(r+=","),r+=c(n)+":"+t)}return a.delete(e),r+="}",r},l=e=>(a.clear(),c(e)),p=/("{3}[\s\S]*"{3}|"(?:\\.|[^"])*")/g,u=/([\s,]|#[^\n\r]+)+/g,f=(e,t)=>t%2==0?e.replace(u," ").trim():e,d=t=>{let r=("string"!=typeof t?t.loc&&t.loc.source.body||e.print(t):t).split(p).map(f).join("");if("string"!=typeof t){const e="definitions"in t&&x(t);e&&(r=`# ${e}\n${r}`),t.loc||(t.loc={start:0,end:r.length,source:{body:r,name:"gql",locationOffset:{line:1,column:1}}})}return r},h=new Map,y=t=>{let r,n;return"string"==typeof t?(r=s(d(t)),n=h.get(r)||e.parse(t,{noLocation:!0})):(r=t.__key||s(d(t)),n=h.get(r)||t),n.loc||d(n),n.__key=r,h.set(r,n),n},x=t=>{for(const r of t.definitions)if(r.kind===e.Kind.OPERATION_DEFINITION&&r.name)return r.name.value},g=(e,t,r)=>{if(!("data"in t)&&!("errors"in t)||"path"in t)throw new Error("No Content");return{operation:e,data:t.data,error:Array.isArray(t.errors)?new n({graphQLErrors:t.errors,response:r}):void 0,extensions:"object"==typeof t.extensions&&t.extensions||void 0,hasNext:!!t.hasNext}},m=(e,t,r)=>{const o={...e};if(o.hasNext=!!t.hasNext,!("path"in t))return"data"in t&&(o.data=t.data),o;Array.isArray(t.errors)&&(o.error=new n({graphQLErrors:o.error?[...o.error.graphQLErrors,...t.errors]:t.errors,response:r}));let s,a=o.data={...o.data},i=0;for(;i<t.path.length;)s=t.path[i++],a=a[s]=Array.isArray(a[s])?[...a[s]]:{...a[s]};return Object.assign(a,t.data),o},b=(e,t,r)=>({operation:e,data:void 0,error:new n({networkError:t,response:r}),extensions:void 0}),O="undefined"!=typeof TextDecoder?new TextDecoder:null,k=/content-type:[^\r\n]*application\/json/i,w=/boundary="?([^=";]+)"?/i;exports.CombinedError=n,exports.createRequest=(e,t)=>{t||(t={});const r=y(e);return{key:o(r.__key,l(t))>>>0,query:r,variables:t}},exports.getOperationName=x,exports.getOperationType=t=>{for(const r of t.definitions)if(r.kind===e.Kind.OPERATION_DEFINITION)return r.operation},exports.keyDocument=y,exports.makeErrorResult=b,exports.makeFetchBody=function(t){return{query:e.print(t.query),operationName:x(t.query),variables:t.variables||void 0,extensions:void 0}},exports.makeFetchOptions=(e,t)=>{const r="query"===e.kind&&!!e.context.preferGetMethod,n={accept:"application/graphql+json, application/json"};r||(n["content-type"]="application/json");const o=("function"==typeof e.context.fetchOptions?e.context.fetchOptions():e.context.fetchOptions)||{};if(o.headers)for(const e in o.headers)n[e.toLowerCase()]=o.headers[e];return{...o,body:!r&&t?JSON.stringify(t):void 0,method:r?"GET":"POST",headers:n}},exports.makeFetchSource=(e,r,n)=>{const o="manual"===n.redirect?400:300,s=e.context.fetch;return t.make((({next:t,complete:a})=>{const i="undefined"!=typeof AbortController?new AbortController:null;i&&(n.signal=i.signal);let c,l=!1,p=!1,u=!1;return Promise.resolve().then((()=>{if(!p)return(s||fetch)(r,n)})).then((r=>{if(r)return c=r,u=c.status<200||c.status>=o,((e,t,r)=>{const n=r.headers&&r.headers.get("Content-Type")||"";if(/text\//i.test(n))return r.text().then((n=>{e(b(t,new Error(n),r))}));if(!/multipart\/mixed/i.test(n))return r.text().then((n=>{e(g(t,JSON.parse(n),r))}));let o="---";const s=n.match(w);let a;s&&(o="--"+s[1]);let i=()=>{};if(r[Symbol.asyncIterator]){const e=r[Symbol.asyncIterator]();a=e.next.bind(e)}else{if(!("body"in r)||!r.body)throw new TypeError("Streaming requests unsupported");{const e=r.body.getReader();i=()=>e.cancel(),a=()=>e.read()}}let c="",p=!0,u=null,f=null;return a().then((function n(s){if(s.done)l=!0;else{const n="Buffer"===(i=s.value).constructor.name?i.toString():O.decode(i);let a=n.indexOf(o);for(a>-1?a+=c.length:a=c.indexOf(o),c+=n;a>-1;){const n=c.slice(0,a),s=c.slice(a+o.length);if(p)p=!1;else{const o=n.indexOf("\r\n\r\n")+4,a=n.slice(0,o),i=n.slice(o,n.lastIndexOf("\r\n"));let c;if(k.test(a))try{c=JSON.parse(i),u=f=f?m(f,c,r):g(t,c,r)}catch(e){}if("--"===s.slice(0,2)||c&&!c.hasNext){if(!f)return e(g(t,{},r));break}}c=s,a=c.indexOf(o)}}var i;if(u&&(e(u),u=null),!s.done&&(!f||f.hasNext))return a().then(n)})).finally(i)})(t,e,c)})).then(a).catch((r=>{if(l)throw r;const n=b(e,u&&c.statusText?new Error(c.statusText):r,c);t(n),a()})),()=>{p=!0,i&&i.abort()}}))},exports.makeFetchURL=(e,t)=>{if("query"!==e.kind||!e.context.preferGetMethod||!t)return e.context.url;const r=new URL(e.context.url),n=r.searchParams;t.operationName&&n.set("operationName",t.operationName),t.query&&n.set("query",t.query.replace(/#[^\n\r]+/g," ").trim()),t.variables&&n.set("variables",l(t.variables)),t.extensions&&n.set("extensions",l(t.extensions));const o=r.toString();return o.length>2047?(e.context.preferGetMethod=!1,e.context.url):o},exports.makeResult=g,exports.mergeResultPatch=m,exports.stringifyDocument=d,exports.stringifyVariables=l;
//# sourceMappingURL=74ef17d1.min.js.map
